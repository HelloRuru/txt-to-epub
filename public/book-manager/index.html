<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

  <title>電子書書櫃管理 | Hello Ruru Tools</title>
  <meta name="description" content="跨平台電子書書櫃整合工具。匯入讀墨、Kobo 書單，自動偵測重複購買，整理你的電子書收藏。">
  <meta name="author" content="Hello Ruru">
  <link rel="canonical" href="https://tools.helloruru.com/book-manager/">

  <meta property="og:type" content="website">
  <meta property="og:title" content="電子書書櫃管理｜跨平台去重">
  <meta property="og:description" content="匯入讀墨、Kobo 書單，自動偵測重複購買，整理你的電子書收藏。">
  <meta property="og:url" content="https://tools.helloruru.com/book-manager/">

  <link rel="icon" type="image/svg+xml" href="/favicon.svg">

  <link rel="preconnect" href="https://lab.helloruru.com" crossorigin>
  <style>
    @font-face { font-family: 'GenSenRounded'; src: url('https://lab.helloruru.com/fonts/GenSenRounded-Regular.woff2') format('woff2'); font-weight: 400; font-display: swap; }
    @font-face { font-family: 'GenSenRounded'; src: url('https://lab.helloruru.com/fonts/GenSenRounded-Medium.woff2') format('woff2'); font-weight: 500; font-display: swap; }
    @font-face { font-family: 'GenSenRounded'; src: url('https://lab.helloruru.com/fonts/GenSenRounded-Bold.woff2') format('woff2'); font-weight: 700; font-display: swap; }
    @font-face { font-family: 'GenWanMinCho'; src: url('https://lab.helloruru.com/fonts/GenWanMin2TC-Regular.woff2') format('woff2'); font-weight: 400; font-display: swap; }
    @font-face { font-family: 'GenWanMinCho'; src: url('https://lab.helloruru.com/fonts/GenWanMin2TC-SemiBold.woff2') format('woff2'); font-weight: 700; font-display: swap; }
  </style>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap">
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

  <link rel="stylesheet" href="css/style.css">
</head>
<body>
  <!-- Header -->
  <header class="brand-header">
    <a href="https://tools.helloruru.com" class="brand-link">
      <span class="brand-name">Hello Ruru Tools</span>
    </a>
    <button class="btn-icon" id="btn-dark-mode" aria-label="切換深色模式">
      <i data-lucide="moon" width="18" height="18"></i>
    </button>
  </header>

  <main class="main">
    <!-- Hero -->
    <div class="hero">
      <h1>電子書書櫃管理</h1>
      <p>跨平台書櫃整合，自動找出重複書籍。</p>
    </div>

    <!-- ── 平台連接 ── -->
    <section class="section" id="section-connect">
      <h2>連接書櫃</h2>

      <!-- 讀墨 -->
      <div class="platform-card" id="card-readmoo">
        <div class="platform-head">
          <span class="platform-dot" style="background:#00C1FF"></span>
          <strong>讀墨 Readmoo</strong>
          <span class="platform-status" id="status-readmoo"></span>
        </div>

        <div class="method-toggle">
          <button class="method-tab active" data-method="password" data-platform="readmoo">帳密登入</button>
          <button class="method-tab" data-method="bookmarklet" data-platform="readmoo">Bookmarklet</button>
        </div>

        <!-- 方法 ① 帳密登入 -->
        <div class="platform-form method-panel" id="form-readmoo" data-method="password">
          <input type="email" id="readmoo-email" class="input" placeholder="讀墨帳號（Email）" autocomplete="email">
          <div class="input-pw-wrap">
            <input type="password" id="readmoo-pass" class="input" placeholder="密碼" autocomplete="current-password">
            <button type="button" class="btn-pw-toggle" data-target="readmoo-pass" aria-label="顯示密碼">
              <i data-lucide="eye-off" width="16" height="16"></i>
            </button>
          </div>
          <button class="btn btn-readmoo" id="btn-fetch-readmoo">
            <i data-lucide="download-cloud" width="16" height="16"></i> 撈取書櫃
          </button>
          <p class="form-note">密碼不會儲存。2025/08 後需至讀墨重新設定密碼。</p>
        </div>

        <!-- 方法 ② Bookmarklet -->
        <div class="bm-panel method-panel" id="bm-readmoo" data-method="bookmarklet" style="display:none">
          <div class="bm-steps">
            <p class="bm-step">➊ 把下面的按鈕拖到書籤列<span class="bm-hint">（手機：長按 → 加入書籤）</span></p>
            <div class="bm-action">
              <a class="bm-link" id="bm-link-readmoo" href="#">📚 撈讀墨書櫃</a>
              <button class="btn btn-sm btn-outline" id="btn-copy-bm">複製</button>
            </div>
            <p class="bm-step">➋ 到 readmoo.com 登入（Passkey、OTP、密碼都行）</p>
            <p class="bm-step">➌ 在讀墨任一頁面，點擊書籤</p>
            <p class="bm-step">➍ 書單自動帶回這裡</p>
          </div>
        </div>

        <div class="platform-progress" id="progress-readmoo" style="display:none">
          <div class="progress-bar"><div class="progress-fill fill-readmoo" id="fill-readmoo"></div></div>
          <span class="progress-text" id="text-readmoo">撈取中...</span>
        </div>
        <div class="platform-result" id="result-readmoo" style="display:none"></div>
      </div>

      <!-- Kobo -->
      <div class="platform-card" id="card-kobo">
        <div class="platform-head">
          <span class="platform-dot" style="background:#BF0000"></span>
          <strong>樂天 Kobo</strong>
          <span class="platform-status" id="status-kobo"></span>
        </div>
        <div class="platform-form" id="form-kobo">
          <input type="email" id="kobo-email" class="input" placeholder="Kobo 帳號（Email）" autocomplete="email">
          <div class="input-pw-wrap">
            <input type="password" id="kobo-pass" class="input" placeholder="密碼" autocomplete="current-password">
            <button type="button" class="btn-pw-toggle" data-target="kobo-pass" aria-label="顯示密碼">
              <i data-lucide="eye-off" width="16" height="16"></i>
            </button>
          </div>
          <button class="btn btn-kobo" id="btn-fetch-kobo">
            <i data-lucide="download-cloud" width="16" height="16"></i> 撈取書櫃
          </button>
          <p class="form-note">密碼不會儲存，僅用於即時登入撈取。</p>
        </div>
        <div class="platform-progress" id="progress-kobo" style="display:none">
          <div class="progress-bar"><div class="progress-fill fill-kobo" id="fill-kobo"></div></div>
          <span class="progress-text" id="text-kobo">撈取中...</span>
        </div>
        <div class="platform-result" id="result-kobo" style="display:none"></div>
      </div>

      <!-- 本機 / 手動 -->
      <div class="platform-card" id="card-calibre">
        <div class="platform-head">
          <span class="platform-dot" style="background:#06A865"></span>
          <strong>本機藏書</strong>
        </div>
        <textarea id="manual-paste" class="textarea" rows="4" placeholder="一行一本，例如：&#10;被討厭的勇氣&#10;原子習慣,James Clear&#10;人類大歷史"></textarea>
        <button class="btn btn-calibre" id="btn-add-manual">
          <i data-lucide="plus" width="16" height="16"></i> 加入
        </button>
      </div>
    </section>

    <!-- ── 書櫃 + 去重 ── -->
    <section class="section" id="section-library" style="display:none">
      <div class="library-header">
        <h2>你的書櫃 <span class="count-badge" id="total-badge">0</span></h2>
        <div class="library-actions">
          <input type="text" id="search-input" class="input input-search" placeholder="搜尋...">
          <button class="btn btn-sm btn-outline" id="btn-sort">按書名</button>
          <button class="btn btn-sm btn-outline" id="btn-export">匯出 CSV</button>
          <button class="btn btn-sm btn-danger-outline" id="btn-clear">清空</button>
        </div>
      </div>

      <!-- 篩選 -->
      <div class="filter-row">
        <button class="pill active" data-filter="all">全部</button>
        <button class="pill" data-filter="duplicate">重複</button>
        <button class="pill pill-readmoo" data-filter="readmoo">讀墨</button>
        <button class="pill pill-kobo" data-filter="kobo">Kobo</button>
        <button class="pill pill-calibre" data-filter="calibre">本機</button>
      </div>

      <!-- 重複提示 -->
      <div class="dup-banner" id="dup-banner" style="display:none">
        <i data-lucide="alert-triangle" width="18" height="18"></i>
        <span id="dup-banner-text"></span>
      </div>

      <!-- 重複群組 -->
      <div id="dup-groups"></div>

      <!-- 書單 -->
      <div id="book-list"></div>

      <!-- 空狀態 -->
      <div class="empty" id="empty-state">
        <p>連接平台或貼上書名，就能開始了。</p>
      </div>
    </section>
    <!-- ── 說明 ── -->
    <section class="section guide" id="section-guide">
      <div class="guide-card">
        <h3 class="guide-title">這個工具適合誰？</h3>
        <p>書散了一地的人。</p>
        <p>讀墨買幾本、Kobo 囤幾本，實體書櫃又登記了一批。</p>
        <p>買到後來，哪些買過、哪些沒買過，自己也記不清了。</p>
        <p>偶爾翻到一本想買的書，付完錢才想起來——好像買過了。</p>
        <p>如果你也是這種人，這裡幫你把散落各處的藏書收攏在一起，重複的自然就現形了。</p>

        <div class="guide-divider"></div>

        <h3 class="guide-title">怎麼用？</h3>
        <p class="guide-steps">
          ➊ 選平台，登入帳號，按「撈取書櫃」<br>
          ➋ 書單會自動全部撈回來<br>
          ➌ 重複的書會自動標出來<br>
          ➍ 實體書或其他平台的書，手動貼上書名就好
        </p>
        <p>讀墨有兩種撈法：直接打帳密，或是用 Bookmarklet 免密碼撈取。</p>
        <p>撈幾個平台都行，書單會合在一起比對。</p>

        <div class="guide-divider"></div>

        <h3 class="guide-title">常見問題</h3>
        <div class="guide-faq">
          <p><strong>密碼會被存起來嗎？</strong><br>
          不會。密碼只在撈取的那一刻使用，撈完即丟，不留痕跡。<br>
          讀墨也支援 Bookmarklet，完全不需要輸入密碼。</p>

          <p><strong>Bookmarklet 是什麼？</strong><br>
          一個存在書籤裡的小工具。先在讀墨登入，再按一下書籤，書單就自動帶回來了。Passkey、OTP、密碼，什麼登入方式都行。</p>

          <p><strong>書單存在哪裡？</strong><br>
          存在你自己的瀏覽器裡，不會上傳到任何地方。換瀏覽器或清除資料就會消失。</p>

          <p><strong>可以撈幾次？</strong><br>
          想撈幾次都行。同一個平台重複撈，已有的書不會重複加入。</p>

          <p><strong>重複怎麼判斷的？</strong><br>
          比對書名。空格、標點、副標題括號這些差異會自動忽略，盡量幫你把同一本書認出來。</p>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2026 <a href="https://ohruru.com">Kaoru Tsai</a></p>
  </footer>

  <!-- Toast -->
  <div id="toast" class="toast" style="display:none"></div>

  <script src="js/app.js"></script>
</body>

</html>
