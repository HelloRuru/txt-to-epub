<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5">

  <!-- SEO -->
  <title>讀墨 AP 接龍工具 | Hello Ruru Tools</title>
  <meta name="description" content="讀墨1500日挑戰社群專用 AP 接龍工具。管理推書夥伴連結、書單追蹤、一鍵複製書名，讓接龍買書更順暢。">
  <meta name="keywords" content="讀墨,Readmoo,AP,推書夥伴,接龍,電子書,1500日挑戰">
  <meta name="author" content="Hello Ruru">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://tools.helloruru.com/readmoo-ap/">

  <!-- Open Graph -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="讀墨 AP 接龍工具｜1500日挑戰社群">
  <meta property="og:description" content="社群專用 AP 接龍工具。管理推書夥伴連結、書單追蹤、一鍵複製書名。">
  <meta property="og:url" content="https://tools.helloruru.com/readmoo-ap/">
  <meta property="og:site_name" content="Hello Ruru Tools">
  <meta property="og:locale" content="zh_TW">

  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="讀墨 AP 接龍工具｜1500日挑戰社群">
  <meta name="twitter:description" content="社群專用 AP 接龍工具。管理推書夥伴連結、書單追蹤、一鍵複製書名。">

  <!-- Favicon -->
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">

  <!-- Fonts: GenSenRounded (DS v1.9) -->
  <link rel="preconnect" href="https://lab.helloruru.com" crossorigin>
  <style>
    @font-face { font-family: 'GenSenRounded'; src: url('https://lab.helloruru.com/fonts/GenSenRounded-Regular.woff2') format('woff2'); font-weight: 400; font-display: swap; }
    @font-face { font-family: 'GenSenRounded'; src: url('https://lab.helloruru.com/fonts/GenSenRounded-Medium.woff2') format('woff2'); font-weight: 500; font-display: swap; }
    @font-face { font-family: 'GenSenRounded'; src: url('https://lab.helloruru.com/fonts/GenSenRounded-Bold.woff2') format('woff2'); font-weight: 700; font-display: swap; }
  </style>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap">

  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.min.js"></script>

  <!-- SheetJS for Excel export -->
  <script src="https://cdn.sheetjs.com/xlsx-0.20.3/package/dist/xlsx.full.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="css/style.css">

  <!-- Schema.org -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebApplication",
    "name": "讀墨 AP 接龍工具",
    "description": "讀墨1500日挑戰社群專用 AP 接龍管理工具",
    "url": "https://tools.helloruru.com/readmoo-ap/",
    "applicationCategory": "UtilityApplication",
    "operatingSystem": "Any",
    "author": { "@type": "Person", "name": "Kaoru Tsai" }
  }
  </script>
</head>
<body>
  <!-- Brand Header -->
  <script src="https://lab.helloruru.com/shared/brand-header.js"></script>
  <hello-ruru-header title="讀墨 AP 接龍工具"></hello-ruru-header>

  <!-- Tab Navigation -->
  <nav class="tab-nav" role="tablist">
    <button class="tab-btn active" data-tab="guide" role="tab" aria-selected="true">
      <i data-lucide="book-open"></i>
      <span>使用指南</span>
    </button>
    <button class="tab-btn" data-tab="chain" role="tab" aria-selected="false">
      <i data-lucide="link"></i>
      <span>AP 接龍</span>
    </button>
    <button class="tab-btn" data-tab="books" role="tab" aria-selected="false">
      <i data-lucide="library"></i>
      <span>我的書單</span>
    </button>
    <button class="tab-btn" data-tab="directory" role="tab" aria-selected="false">
      <i data-lucide="users"></i>
      <span>AP 名冊</span>
    </button>
    <button class="tab-btn" data-tab="changelog" role="tab" aria-selected="false">
      <i data-lucide="file-text"></i>
      <span>修改紀錄</span>
    </button>
  </nav>

  <!-- 身份狀態列 -->
  <div id="user-bar" class="user-bar" style="display:none;">
    <span><i data-lucide="user"></i> <strong id="user-bar-name"></strong></span>
    <button id="btn-logout" class="btn-text btn-sm">切換身份</button>
  </div>

  <main class="main-content">
    <!-- ============ Tab 1: 使用指南 ============ -->
    <section id="tab-guide" class="tab-panel active" role="tabpanel">
      <div class="guide-container">
        <div class="welcome-card card">
          <h2>歡迎來到讀墨 AP 接龍工具</h2>
          <p class="welcome-text">
            嗨，歡迎加入<strong>讀墨1500日挑戰</strong>！<br>
            這裡是我們社群專用的小工具，讓大家買書時可以互相支持。
          </p>
        </div>

        <!-- 快速操作 -->
        <div class="quick-actions">
          <a href="https://reurl.cc/DbRK35" target="_blank" rel="noopener" class="quick-action-card">
            <i data-lucide="user-plus"></i>
            <div>
              <strong>我是新人，想加入 AP</strong>
              <p>填表登記你的 AP 連結，加入接龍行列</p>
            </div>
          </a>
          <a href="#directory" class="quick-action-card" id="qa-edit-link">
            <i data-lucide="link"></i>
            <div>
              <strong>我要修改我的 AP 連結</strong>
              <p>更新名冊裡的連結或資料</p>
            </div>
          </a>
          <a href="#books" class="quick-action-card">
            <i data-lucide="book-heart"></i>
            <div>
              <strong>我想記錄想買的書</strong>
              <p>搜尋讀墨書庫，把書加到你的書單</p>
            </div>
          </a>
          <a href="#chain" class="quick-action-card">
            <i data-lucide="link"></i>
            <div>
              <strong>我要開始接龍買書</strong>
              <p>選人、排順序，一步一步跟著買</p>
            </div>
          </a>
        </div>

        <div class="card guide-section">
          <h3><i data-lucide="help-circle"></i> 什麼是 AP 推書夥伴？</h3>
          <p>AP（Affiliate Program）是讀墨的推書夥伴功能。開通之後，你會得到一組專屬連結。</p>
          <div class="benefit-list">
            <div class="benefit-item">
              <i data-lucide="coins"></i>
              <div>
                <strong>3% 購書回饋</strong>
                <p>別人透過你的連結買書，你可以獲得讀墨的 3% 回饋金</p>
              </div>
            </div>
            <div class="benefit-item">
              <i data-lucide="star"></i>
              <div>
                <strong>魅力值加成</strong>
                <p>可以增加你的會員等級魅力值</p>
              </div>
            </div>
          </div>
          <div class="link-group">
            <a href="https://ap.readmoo.com/" target="_blank" rel="noopener" class="btn-secondary">
              <i data-lucide="external-link"></i> AP 推書夥伴介紹
            </a>
            <a href="https://reurl.cc/DbRK35" target="_blank" rel="noopener" class="btn-secondary">
              <i data-lucide="user-plus"></i> 社群 AP 登記表
            </a>
          </div>
        </div>

        <div class="card guide-section">
          <h3><i data-lucide="list-ordered"></i> AP 接龍怎麼玩？</h3>
          <p class="guide-intro">一句話：<strong>一本書配一個人的連結</strong>，輪流讓大家都拿到回饋金。</p>

          <div class="storybook">
            <div class="storybook-page">
              <div class="page-illust"><i data-lucide="clipboard-list"></i></div>
              <div class="page-label">事前準備</div>
              <div class="page-text">
                把想買的書丟進<strong>「我的書單」</strong>。<br>
                關掉所有讀墨的網頁。<br>
                <strong>清空購物車</strong>。
              </div>
              <div class="page-why">購物車裡不能有先放的書，一定要透過 AP 連結加進去才算。</div>
            </div>

            <div class="storybook-connector">↓</div>

            <div class="storybook-page">
              <div class="page-illust"><i data-lucide="mouse-pointer-click"></i></div>
              <div class="page-label">第一個人</div>
              <div class="page-text">
                點<strong>第一位夥伴的 AP 連結</strong><br>
                → 進讀墨，搜你要的書<br>
                → 加入購物車<br>
                → <strong>關掉讀墨</strong>
              </div>
              <div class="page-why">一定要關。讀墨沒關乾淨，下一位的 AP 不會生效。</div>
            </div>

            <div class="storybook-connector">↓</div>

            <div class="storybook-page">
              <div class="page-illust"><i data-lucide="repeat"></i></div>
              <div class="page-label">換下一位</div>
              <div class="page-text">
                點<strong>第二位的 AP 連結</strong><br>
                → 搜書 → 加購物車 → 關掉<br>
                → 第三位、第四位⋯⋯一樣的步驟。
              </div>
              <div class="page-why">讀墨的網頁請保持全關，除非你正在加 AP 書。</div>
            </div>

            <div class="storybook-connector">↓</div>

            <div class="storybook-page">
              <div class="page-illust"><i data-lucide="shopping-cart"></i></div>
              <div class="page-label">最後結帳</div>
              <div class="page-text">
                全部加完，打開讀墨購物車。<br>
                <strong>一次結帳</strong>，搞定。
              </div>
            </div>
          </div>

          <div class="storybook-tip">
            <div class="tip-icon"><i data-lucide="lightbulb"></i></div>
            <div class="tip-content">
              <strong>小提醒</strong>：接龍中途不要亂逛讀墨、不要點別的書的連結，AP 歸屬會跑掉。乖乖照順序來就對了。
            </div>
          </div>

          <div class="storybook-tip">
            <div class="tip-icon"><i data-lucide="zap"></i></div>
            <div class="tip-content">
              <strong>懶人做法</strong>：切到「AP 接龍」分頁，勾好要接龍的夥伴，每個人配一本書，按一下就複製書名，再點 AP 連結過去貼上。不用自己記誰配誰。
            </div>
          </div>
        </div>

        <div class="card guide-section">
          <h3><i data-lucide="sparkles"></i> 這個工具可以幫你</h3>
          <ul class="feature-list">
            <li><i data-lucide="check"></i> 從 AP 名冊勾選要接龍的夥伴</li>
            <li><i data-lucide="check"></i> 管理你的書單，一鍵複製書名</li>
            <li><i data-lucide="check"></i> 追蹤購買狀態（買了沒、透過誰買的）</li>
            <li><i data-lucide="check"></i> 匯出 AP 名單分享到 LINE 群</li>
            <li><i data-lucide="shield"></i> 不存取你的任何資料，一切都只存在你的裝置上</li>
          </ul>
        </div>

        <div class="card guide-section">
          <h3><i data-lucide="shield"></i> 關於你的資料</h3>
          <div class="faq-list">
            <details class="faq-item">
              <summary>別人會知道我買了什麼書嗎？</summary>
              <div class="faq-detail">
                <p><strong>不會。</strong></p>
                <ul>
                  <li>五花偷偷透過犢叔的 AP 連結買了一本言情小說 — 只有五花自己知道，噓</li>
                  <li>犢叔可以從 AP 受益單看到有人透過他的連結買了一本書 — 但他不知道是誰買的</li>
                  <li>其他人更不可能看到五花的書單、買了什麼、或透過誰買的</li>
                </ul>
                <p>你的閱讀口味是你的秘密。</p>
              </div>
            </details>
            <details class="faq-item">
              <summary>有人假裝是我去亂改東西怎麼辦？</summary>
              <div class="faq-detail">
                <p>假設犢叔調皮地選了五花的名字登入，然後跑去改名冊。這時候會怎樣呢？</p>
                <ul>
                  <li><strong>五花的書單安全得很</strong> — 書單住在五花自己的瀏覽器裡，犢叔就算選了五花的名字，也只會看到他自己的空書單，摸不到五花的任何資料</li>
                  <li><strong>但名冊會被動到</strong> — 因為名冊是大家共用的 Google 試算表</li>
                </ul>
                <p>不過別緊張，有這些防護措施罩你：</p>
                <ul>
                  <li><strong>修改紀錄全都錄</strong> — 誰改的、什麼時候改、改了什麼，全部白紙黑字記在「修改紀錄」裡，大家都看得到</li>
                  <li><strong>時光倒流大法</strong> — Google 試算表有版本紀錄，管理員可以把名冊還原到被改之前的任何時間點</li>
                  <li><strong>發現異常快回報</strong> — 如果看到不是你做的惡意修改，趕快跟社群的大家說一聲</li>
                </ul>
              </div>
            </details>
            <details class="faq-item">
              <summary>我的書單存在哪裡？會不會不見？</summary>
              <div class="faq-detail">
                <p>全部存在<strong>你自己的瀏覽器</strong>裡（技術上叫 localStorage），包括：</p>
                <ul>
                  <li>你的書單和購買紀錄</li>
                  <li>你的身份設定</li>
                  <li>接龍配對資料</li>
                </ul>
                <p>想像一下：五花開心地在手機上收藏了 10 本書。犢叔用電腦打開同一個網址 — 他只會看到自己的空書單，完全看不到五花偷偷收藏了什麼。每個人的瀏覽器是各自獨立的小世界！</p>
                <p><strong>小提醒</strong>：換瀏覽器或清除瀏覽資料的話，書單就會消失喔。記得定期用匯出功能備份，才不會哭哭。</p>
              </div>
            </details>
            <details class="faq-item">
              <summary>搜尋讀墨書庫會留下紀錄嗎？</summary>
              <p>搜尋時會經過我們的伺服器轉發到讀墨網站，但<strong>不會記錄你搜了什麼</strong>。搜尋結果會快取 30 分鐘讓大家查得更快，之後就自動消失了。所以就算你搜了什麼奇怪的書名，也不會有人知道的（笑）。</p>
            </details>
            <details class="faq-item">
              <summary>AP 名冊是怎麼運作的？</summary>
              <div class="faq-detail">
                <p>名冊資料來自社群共用的 <strong>Google 試算表</strong>，由群友自行填寫登記。這裡只是幫大家把名冊漂漂亮亮地顯示出來。</p>
                <p>通過社群驗證的人都可以編輯名冊，但每次修改都會自動記錄<strong>誰改的、什麼時候改、改了什麼</strong>，通通記在「修改紀錄」裡。所以請乖乖只改自己的資料喔。</p>
              </div>
            </details>
          </div>
        </div>
      </div>
    </section>

    <!-- ============ Tab 2: AP 接龍 ============ -->
    <section id="tab-chain" class="tab-panel" role="tabpanel">
      <div class="chain-container">
        <!-- Step 1: 選人 -->
        <div id="chain-step-select" class="chain-step">
          <h2>選擇接龍夥伴</h2>
          <p class="section-desc">從 AP 名冊中勾選這次要接龍的人，然後點擊「開始接龍」。</p>

          <div class="chain-toolbar">
            <label class="checkbox-label">
              <input type="checkbox" id="chain-select-all"> 全選
            </label>
            <input type="text" id="chain-search" class="input-field" placeholder="搜尋成員...">
            <span id="chain-selected-count" class="badge">已選 0 人</span>
          </div>

          <div id="chain-member-list" class="member-grid">
            <!-- Dynamically populated -->
          </div>

          <div class="chain-actions">
            <button id="btn-start-chain" class="btn-primary" disabled>
              <i data-lucide="play"></i> 開始接龍
            </button>
          </div>
        </div>

        <!-- Step 2: 接龍模式 -->
        <div id="chain-step-active" class="chain-step" style="display:none;">
          <div class="chain-header">
            <h2>接龍進行中</h2>
            <button id="btn-exit-chain" class="btn-secondary btn-sm">
              <i data-lucide="x"></i> 結束接龍
            </button>
          </div>

          <div class="chain-progress">
            <div class="progress-bar">
              <div id="chain-progress-fill" class="progress-fill"></div>
            </div>
            <span id="chain-progress-text">0 / 0 完成</span>
          </div>

          <p class="chain-hint" id="chain-no-books" style="display:none;">
            你的書單是空的。先到「<a href="#books">我的書單</a>」新增想買的書，接龍時才能配對。
          </p>

          <div id="chain-queue" class="chain-queue">
            <!-- Dynamically populated -->
          </div>
        </div>
      </div>
    </section>

    <!-- ============ Tab 3: 我的書單 ============ -->
    <section id="tab-books" class="tab-panel" role="tabpanel">
      <div class="books-container">
        <div class="section-header">
          <h2>我的書單</h2>
          <div class="header-actions">
            <button id="btn-search-readmoo" class="btn-primary btn-sm">
              <i data-lucide="search"></i> 搜尋讀墨
            </button>
            <button id="btn-add-book" class="btn-secondary btn-sm">
              <i data-lucide="plus"></i> 手動新增
            </button>
            <button id="btn-batch-add" class="btn-secondary btn-sm">
              <i data-lucide="clipboard-paste"></i> 快速貼入
            </button>
            <button id="btn-export-books" class="btn-secondary btn-sm">
              <i data-lucide="download"></i> 匯出
            </button>
          </div>
        </div>

        <!-- Readmoo 搜尋區 -->
        <div id="readmoo-search-panel" class="readmoo-search-panel" style="display:none;">
          <p class="search-hint">搜尋 Readmoo 讀墨電子書庫，找到想要的書直接加入書單。搜不到不代表其他平台沒有喔！</p>
          <div class="search-input-row">
            <input type="text" id="readmoo-search-input" class="input-field" placeholder="在讀墨書庫搜尋書名...">
            <button id="btn-readmoo-go" class="btn-primary btn-sm">
              <i data-lucide="search"></i>
            </button>
          </div>
          <div id="readmoo-search-status" class="search-status" style="display:none;"></div>
          <div id="readmoo-search-results" class="readmoo-results"></div>
        </div>

        <div class="books-filter">
          <button class="filter-btn active" data-filter="all">全部</button>
          <button class="filter-btn" data-filter="want">想買</button>
          <button class="filter-btn" data-filter="bought">已購買</button>
        </div>

        <div id="books-list" class="books-list">
          <!-- Dynamically populated -->
        </div>
        <p id="books-empty" class="empty-state">
          <i data-lucide="book-plus"></i><br>
          還沒有書呢，點擊「新增書籍」開始建立你的書單吧！
        </p>
      </div>
    </section>

    <!-- ============ Tab 4: AP 名冊 ============ -->
    <section id="tab-directory" class="tab-panel" role="tabpanel">
      <div class="directory-container">
        <div class="section-header">
          <h2>AP 名冊</h2>
          <div class="header-actions">
            <button id="btn-edit-directory" class="btn-primary btn-sm">
              <i data-lucide="edit"></i> 編輯名冊
            </button>
            <button id="btn-export-directory" class="btn-secondary btn-sm">
              <i data-lucide="download"></i> 匯出
            </button>
          </div>
        </div>

        <div class="directory-toolbar">
          <input type="text" id="directory-search" class="input-field" placeholder="搜尋成員...">
          <span id="directory-count" class="badge">共 0 人</span>
        </div>

        <div id="directory-list" class="directory-list">
          <!-- Dynamically populated -->
        </div>

        <div id="directory-loading" class="loading-state">
          <div class="spinner"></div>
          <p>正在載入 AP 名冊...</p>
        </div>
      </div>
    </section>

    <!-- ============ Tab 5: 修改紀錄 ============ -->
    <section id="tab-changelog" class="tab-panel" role="tabpanel">
      <div class="changelog-container">
        <div class="section-header">
          <h2>修改紀錄</h2>
          <div class="header-actions">
            <input type="date" id="changelog-date-filter" class="input-field">
          </div>
        </div>

        <div id="changelog-list" class="changelog-list">
          <!-- Dynamically populated -->
        </div>
        <p id="changelog-empty" class="empty-state">
          <i data-lucide="file-text"></i><br>
          目前沒有修改紀錄。
        </p>
      </div>
    </section>
  </main>

  <!-- ============ Modals ============ -->

  <!-- Identity + Quiz Modal -->
  <div id="quiz-modal" class="modal-overlay" style="display:none;">
    <div class="modal-card">
      <button class="modal-close" id="quiz-modal-close">
        <i data-lucide="x"></i>
      </button>

      <!-- Step 1: 選擇身份 -->
      <div id="identity-step" class="modal-step">
        <h2>你是誰？</h2>
        <p class="modal-desc">從名冊中選擇你的名字，就能開始使用。</p>

        <div class="form-group">
          <label for="identity-select">我是...</label>
          <select id="identity-select" class="input-field">
            <option value="">-- 選擇你的名字 --</option>
          </select>
        </div>

        <button id="btn-identity-confirm" class="btn-primary" disabled>確認，這是我</button>

        <div class="identity-divider"><span>或</span></div>

        <div class="identity-newbie">
          <p>我還沒有加入 AP 名冊</p>
          <a href="https://reurl.cc/DbRK35" target="_blank" rel="noopener" class="btn-secondary">
            <i data-lucide="user-plus"></i> 去填 AP 連結登記表
          </a>
          <p class="hint-text">填完登記表後，等名冊更新就能選到你的名字囉！</p>
        </div>
      </div>

      <!-- Step 2: 快速通關 -->
      <div id="quiz-step" class="modal-step" style="display:none;">
        <h2>快速通關</h2>
        <p class="modal-desc">回答兩題，確認你是社群夥伴。</p>

        <div class="quiz-question" id="quiz-q1">
          <h3>你所屬的社群名稱是？</h3>
          <div class="quiz-options">
            <label class="quiz-option"><input type="radio" name="q1" value="A"> <span>讀墨每日閱讀計畫</span></label>
            <label class="quiz-option"><input type="radio" name="q1" value="B"> <span>電子書馬拉松讀書會</span></label>
            <label class="quiz-option"><input type="radio" name="q1" value="C"> <span>讀墨1500日挑戰</span></label>
            <label class="quiz-option"><input type="radio" name="q1" value="D"> <span>墨水瓶閱讀社團</span></label>
          </div>
        </div>

        <div class="quiz-question" id="quiz-q2">
          <h3>讀墨的牛牛吉祥物叫什麼名字？</h3>
          <div class="quiz-options">
            <label class="quiz-option"><input type="radio" name="q2" value="A"> <span>墨墨</span></label>
            <label class="quiz-option"><input type="radio" name="q2" value="B"> <span>五花</span></label>
            <label class="quiz-option"><input type="radio" name="q2" value="C"> <span>阿牧</span></label>
            <label class="quiz-option"><input type="radio" name="q2" value="D"> <span>小讀</span></label>
          </div>
        </div>

        <div id="quiz-error" class="alert-error" style="display:none;">
          <i data-lucide="x-circle"></i>
          <span>不對喔，再想想看？</span>
        </div>

        <button id="btn-quiz-submit" class="btn-primary">通關！</button>
      </div>
    </div>
  </div>

  <!-- Add Book Modal -->
  <div id="book-modal" class="modal-overlay" style="display:none;">
    <div class="modal-card">
      <button class="modal-close" id="book-modal-close">
        <i data-lucide="x"></i>
      </button>
      <h2 id="book-modal-title">新增書籍</h2>

      <div class="form-group">
        <label for="book-title">書名 <span class="required">*</span></label>
        <input type="text" id="book-title" class="input-field" placeholder="輸入書名">
      </div>
      <div class="form-group">
        <label for="book-author">作者</label>
        <input type="text" id="book-author" class="input-field" placeholder="輸入作者">
      </div>
      <div class="form-row">
        <div class="form-group">
          <label for="book-publisher">出版社</label>
          <input type="text" id="book-publisher" class="input-field" placeholder="如：方智出版">
        </div>
        <div class="form-group">
          <label for="book-pubdate">出版日期</label>
          <input type="text" id="book-pubdate" class="input-field" placeholder="如：2026/01">
        </div>
      </div>

      <input type="hidden" id="book-edit-id">
      <button id="btn-book-save" class="btn-primary">儲存</button>
    </div>
  </div>

  <!-- Batch Add Books Modal -->
  <div id="batch-modal" class="modal-overlay" style="display:none;">
    <div class="modal-card">
      <button class="modal-close" id="batch-modal-close">
        <i data-lucide="x"></i>
      </button>
      <h2>快速貼入書單</h2>
      <p class="modal-desc">每行一本書名，會自動建立多筆書籍。</p>
      <div class="form-group">
        <textarea id="batch-input" class="input-field textarea" rows="8" placeholder="書名一&#10;書名二&#10;書名三"></textarea>
      </div>
      <button id="btn-batch-save" class="btn-primary">全部新增</button>
    </div>
  </div>

  <!-- Export Modal -->
  <div id="export-modal" class="modal-overlay" style="display:none;">
    <div class="modal-card">
      <button class="modal-close" id="export-modal-close">
        <i data-lucide="x"></i>
      </button>
      <h2 id="export-modal-title">匯出</h2>

      <div class="export-options">
        <button class="export-btn" data-format="text">
          <i data-lucide="file-text"></i>
          <span>純文字</span>
          <small>可直接貼到 LINE</small>
        </button>
        <button class="export-btn" data-format="excel">
          <i data-lucide="table"></i>
          <span>Excel</span>
          <small>.xlsx 檔案</small>
        </button>
      </div>

      <div id="export-scope" class="export-scope">
        <label class="radio-label"><input type="radio" name="export-scope" value="all" checked> 全部</label>
        <label class="radio-label"><input type="radio" name="export-scope" value="selected"> 僅勾選</label>
      </div>

      <div id="export-preview" class="export-preview" style="display:none;">
        <textarea id="export-text" class="input-field textarea" rows="10" readonly></textarea>
        <button id="btn-copy-export" class="btn-secondary btn-sm">
          <i data-lucide="copy"></i> 複製
        </button>
      </div>
    </div>
  </div>

  <!-- Purchase Modal -->
  <div id="purchase-modal" class="modal-overlay" style="display:none;">
    <div class="modal-card">
      <button class="modal-close" id="purchase-modal-close">
        <i data-lucide="x"></i>
      </button>
      <h2>標記已購買</h2>

      <div class="form-group">
        <label for="purchase-date">購買日期</label>
        <input type="date" id="purchase-date" class="input-field">
      </div>
      <div class="form-group">
        <label for="purchase-via">透過誰的 AP 購買</label>
        <select id="purchase-via" class="input-field">
          <option value="">-- 選擇 --</option>
        </select>
      </div>

      <input type="hidden" id="purchase-book-id">
      <button id="btn-purchase-save" class="btn-primary">確認購買</button>
    </div>
  </div>

  <!-- Toast -->
  <div id="toast" class="toast" style="display:none;"></div>

  <!-- Dark Mode Toggle -->
  <button class="theme-toggle" aria-label="切換深色模式">
    <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/>
    </svg>
    <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
    </svg>
  </button>

  <!-- Footer -->
  <footer class="site-footer">
    <p>&copy; <span id="footer-year"></span> Kaoru Tsai（嚕嚕在看書！）</p>
    <div class="footer-legal">
      <p><strong>聲明</strong>：本工具專為「讀墨1500日挑戰」LINE 社群成員製作，並非 <a href="https://readmoo.com" target="_blank" rel="noopener">Readmoo 讀墨電子書</a>官方產品，與 Readmoo 讀墨股份有限公司無任何隸屬、合作或授權關係。</p>
      <p><strong>商標與著作權</strong>：「Readmoo」、「讀墨」、「mooInk」、「五花」及相關標誌為 Readmoo 讀墨股份有限公司之商標或註冊商標。所有書籍內容、封面圖片及相關權利歸原權利人所有。本工具使用上述名稱僅為說明用途，不構成任何商業使用。</p>
      <p><strong>資料來源</strong>：書籍搜尋結果來自 Readmoo 公開頁面，僅供社群成員個人查詢使用。AP 名冊資料來自社群共用 Google 試算表。</p>
      <p><strong>隱私</strong>：你的書單、購買紀錄及個人設定儲存於你的瀏覽器（localStorage），不會上傳至任何伺服器，也不會與第三方共享。搜尋查詢不會被記錄。</p>
      <p><strong>免責</strong>：本工具依「現況」提供，不保證搜尋結果的即時性或完整性。AP 推書夥伴回饋機制由 Readmoo 管理，本工具不承擔任何交易相關責任。</p>
    </div>
    <p class="footer-contact">問題回報：<a href="mailto:hello@helloruru.com">hello@helloruru.com</a></p>
  </footer>

  <!-- Scripts -->
  <script src="js/app.js"></script>
  <script src="js/quiz.js"></script>
  <script src="js/ap-directory.js"></script>
  <script src="js/ap-chain.js"></script>
  <script src="js/books.js"></script>
  <script src="js/changelog.js"></script>
  <script src="js/export-utils.js"></script>
  <script src="js/readmoo-search.js"></script>
</body>
</html>
